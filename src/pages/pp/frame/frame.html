<ion-header>
  <ion-navbar color="primary">
    <ion-title>冲压件装框</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>
  <form (submit)="scanBox()">
    <ion-searchbar #searchbar placeholder="{{barTextHolderText}}" [(ngModel)]="box_label" name="box_label"
      (ionFocus)="focusInput()" (ionBlur)="blurInput()">
    </ion-searchbar>
  </form>
  <select [(ngModel)]="item.bundle_no" interface="popover" style="width: 100%;height: 10%;">
    <option *ngFor="let t of feedPort_list" style="width: 100%;height: 8%;" value="{{t.bundle_no}}">
      {{t.port_name}}&nbsp;{{t.bundle_no}}&nbsp;剩余数量:{{t.remain_pieces}}
    </option>
  </select>

  <select [(ngModel)]="item.part_no" (ngModelChange)="changeFeed(item.part_no)" style="width: 100%;height: 10%;"
    interface="popover">
    <option *ngFor="let t of pressPart_list" style="width: 100%;height: 8%;" value="{{t.part_no}}">
      {{t.part_no}}&nbsp;{{t.part_name}}&nbsp;消耗:{{t.usage}}
    </option>
  </select>
  <ion-list *ngIf="item.box_label">
    <ion-item>
      <ion-label><svg t="1608779670650" class="icon" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="3210" width="16" height="16">
          <path
            d="M53.989 22.238h393.236c39.983 3.903 30.344 73.419 30.344 118.577v215.01c0 46.735 8.913 104.013-22.429 117.285-20.415 8.641-75.199 2.604-101.61 2.604H145.046c-48.2 0-114.006 11.354-121.404-29.974V52.207c5.39-14.658 14.87-25.278 30.347-29.969m54.109 88.61v280.164H391.8V106.94H109.42c-1.546 0.211-1.44 2.058-1.322 3.91m473.717-88.61h393.236c16.04 5.876 27.058 16.713 30.346 35.182v383.107c-3.6 15.925-12.017 29.514-27.71 33.879-25.647 7.13-68.274 1.307-98.969 1.307H676.827c-30.447 0-75.57 6.33-100.287-1.307-34.895-10.78-25.069-78.04-25.069-125.095v-200.68c0-54.319-12.078-118.803 30.344-126.394m54.104 88.61v280.164h283.713V106.94H637.238c-1.535 0.211-1.432 2.058-1.319 3.91m-398.507 82.095c39.51-7.365 70.582 18.998 71.257 54.726 0.884 47.126-47.848 73.008-85.77 53.43-43.393-22.396-40.539-97.902 14.513-108.156m527.825 0c93.073-17.172 91.288 128.38 0 113.365-58.09-9.55-59.967-102.308 0-113.365m-320.65 811.833H55.312c-16.163-4.9-27.078-14.969-31.669-31.277V581.266c3.842-11.482 12.715-24.868 26.388-28.67 25.833-7.176 68.025-1.303 98.974-1.303H350.89c29.838 0 73.265-6.575 100.287 1.304 36.565 10.656 26.392 76.828 26.392 123.795v207.19c0 50.69 11.055 116.667-32.982 121.195m-336.49-364.876v280.171H391.8V635.991H109.42c-1.546 0.226-1.44 2.065-1.322 3.91m897.298-53.42v109.457c-3.075 36.922-0.44 79.487-1.314 118.582H723.01v-63.847c-26.395-3.05-58.5-0.442-87.086-1.314-3.082 82.535-0.44 170.708-1.324 255.412h-51.466c-44.246-8.763-31.668-74.327-31.668-126.402V676.392c0-30.37-6.226-75.908 1.32-100.343 9.005-29.158 48.036-24.76 87.094-24.76h191.335v173.312h88.415c0.874-57.338-1.758-118.147 1.312-173.311 42.549-2.486 81.956-1.872 84.454 35.19M244.011 720.692c42.192-4.61 77.063 35.435 60.704 79.497-22.69 61.066-131.156 38.11-110.846-39.096 5.61-21.343 21.835-37.301 50.142-40.401m574.01 284.085H723.01c0.879-33.456-1.758-70.377 1.324-101.65h93.688v101.65h-0.001m187.375-101.649v66.463c-3.67 18.526-14.635 29.84-31.668 35.182h-67.295c0.877-33.45-1.758-70.368 1.321-101.643h97.642v-0.002m0 0"
            p-id="3211"></path>
        </svg>料箱号:&nbsp;{{item.box_label}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>
        <ion-icon name="car"></ion-icon>车型:&nbsp;{{item.car_model}}
      </ion-label>
      <ion-label>
        <ion-icon name="ios-cube"></ion-icon>箱型:&nbsp;{{item.box_mode}}
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="color: red;">装箱数量:&nbsp;{{item.current_parts}}</ion-label>
      <ion-label><button ion-button icon-end (click)="changeQty(item)">修改装箱信息</button></ion-label>
      <ion-label style="float:right;"><button color="danger" ion-button icon-end >X</button></ion-label>
    </ion-item>
  </ion-list>
  <div *ngIf="true">
    <h4>零件组：ZQMNVV</h4>
    <select [(ngModel)]="item.part_no" (ngModelChange)="changeFeed(item.part_no)" style="width: 100%;height: 10%;"
      interface="popover">
      <option *ngFor="let t of pressPart_list" style="width: 100%;height: 8%;" value="{{t.part_no}}">
        {{t.part_no}}&nbsp;{{t.part_name}}&nbsp;消耗:{{t.usage}}
      </option>
    </select>
    <div class="ds-box" >
      <div class="row">
        <div class="col">
          捆包号:P161206953 
        </div>
        <div class="col">
          <span>剩余数量:34</span>
        </div>
      </div>
      <div class="row" >
        <div class="col">
          <span>料箱号:LJ25614500001</span>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <ion-icon name="car"></ion-icon>车型:{{item.car_model}}
          <br>
          <span style="color: red;">装箱数量:{{item.current_parts}}</span>
        </div>
        <div class="col">
          <ion-icon name="ios-cube"></ion-icon>箱型:{{item.box_mode}}
          <br>
          <span><button ion-button icon-end (click)="changeQty(item)">修改装箱信息</button></span> 
        </div>        
      </div>
    </div>
  </div>
  <message-list [data]="errors"></message-list>
</ion-content>
<ion-footer>
  <ion-row>
    <ion-col no-padding>
      <button no-margin ion-button full large color="light" (click)="cancel()">撤销</button>
    </ion-col>
    <ion-col no-padding>
      <button no-margin ion-button full large color="primary" [disabled]="!item.box_label.length"
        (click)="save()">提交</button>
    </ion-col>
  </ion-row>
</ion-footer>
